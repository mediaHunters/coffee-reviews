{"version":3,"sources":["../src/ui/portal/User/rest/v1/UserController.ts"],"sourcesContent":["import { OK } from 'http-status-codes';\n\nimport { inject } from 'inversify';\n\nimport {\n  BaseHttpController,\n  controller,\n  httpGet,\n  httpPost,\n  requestBody,\n} from 'inversify-express-utils';\n\nimport { Request } from 'express';\n\nimport { IUserService } from 'core/applicationServices/User/IUserService';\nimport { RemoveUserCommand } from 'core/applicationServices/User/requests/command/RemoveUserCommand';\nimport { DOMAIN_APPLICATION_SERVICE_IDENTIFIERS } from 'core/CoreModuleSymbols';\n\nimport { RemoveUserCommandBody } from 'ui/portal/User/rest/v1/requests/command/RemoveUserCommandBody';\nimport { isAuthenticated } from 'ui/common/config/application/express/auth/middlewares/isAuthenticated';\nimport { USER_ROLE } from 'core/domain/User/UserRole';\nimport { getCurrentUser } from 'ui/common/config/application/express/auth/utils/getHttpContext';\n\n@controller('/v1/user')\nexport class UserController extends BaseHttpController {\n  constructor(\n    @inject(DOMAIN_APPLICATION_SERVICE_IDENTIFIERS.USER_SERVICE)\n    private readonly UserService: IUserService\n  ) {\n    super();\n  }\n\n  @httpGet('/')\n  public async get() {\n    return this.json(OK);\n  }\n\n  @httpGet('/currentUser')\n  public async getCurrentUser(req: Request) {\n    const user = getCurrentUser(req);\n\n    return this.json(user);\n  }\n\n  @httpPost('/removeUser', isAuthenticated({ role: USER_ROLE.MEMBER }))\n  public async Remove(@requestBody() { id }: RemoveUserCommandBody) {\n    return this.UserService.removeUser(new RemoveUserCommand(id));\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,SAAS,UAAU;AAEnB,SAAS,cAAc;AAEvB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAcA,IAAM,iBAAN,cAA6B,mBAAmB;AAAA,EACrD,YAEmB,aACjB;AACA,UAAM;AAFW;AAAA,EAGnB;AAAA,EAGA,MAAa,MAAM;AACjB,WAAO,KAAK,KAAK,EAAE;AAAA,EACrB;AAAA,EAGA,MAAa,eAAe,KAAc;AACxC,UAAM,OAAO,eAAe,GAAG;AAE/B,WAAO,KAAK,KAAK,IAAI;AAAA,EACvB;AAAA,EAGA,MAAa,OAAsB,EAAE,GAAG,GAA0B;AAChE,WAAO,KAAK,YAAY,WAAW,IAAI,kBAAkB,EAAE,CAAC;AAAA,EAC9D;AACF;AAxBa;AASE;AAAA,EADZ,QAAQ,GAAG;AAAA,GARD,eASE;AAKA;AAAA,EADZ,QAAQ,cAAc;AAAA,GAbZ,eAcE;AAOA;AAAA,EADZ,SAAS,eAAe,gBAAgB,EAAE,4BAAuB,CAAC,CAAC;AAAA,EAChD,mBAAC,YAAY;AAAA,GArBtB,eAqBE;AArBF,iBAAN;AAAA,EADN,WAAW,UAAU;AAAA,EAGlB,mBAAC,OAAO,uCAAuC,YAAY;AAAA,GAFlD;","names":[]}