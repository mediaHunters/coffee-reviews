{"version":3,"sources":["../src/dependency/AppContainer.ts"],"sourcesContent":["import express from 'express';\n\nimport { InversifyExpressServer } from 'inversify-express-utils';\n\nimport { CommonModule } from 'dependency/common/CommonModule';\nimport { ApplicationModule } from 'dependency/common/ApplicationModule';\nimport { BaseContainer } from 'dependency/BaseContainer';\n\nimport { ExpressApplication } from 'ui/common/config/application/express/ExpressApplication';\nimport { errorHandler } from 'ui/common/config/errors/handlers/errorHandler';\nimport { UI_APPLICATION_IDENTIFIERS } from 'ui/UIModuleSymbols';\n\nimport { AuthenticationModule } from 'dependency/shared/Authentication/AuthenticationModule';\nimport { UserModule } from 'dependency/shared/User/UserModule';\nimport { RoleModule } from 'dependency/Administration/RoleModule';\nimport { ApplicationAuthProvider } from 'ui/common/config/application/express/auth/middlewares/ApplicationAuthProvider';\nimport { CoffeeModule } from 'dependency/shared/Coffee/CoffeeModule';\nimport { ReviewModule } from 'dependency/shared/Review/ReviewModule';\n\nexport class AppContainer extends BaseContainer {\n  constructor() {\n    super({\n      defaultScope: 'Singleton',\n      skipBaseClassChecks: true,\n    });\n  }\n\n  public init(): void {\n    this.provideCommonModule();\n\n    this.provideApplicationModule();\n    this.provideInversifyExpressApplication();\n    this.initializeSharedNamespace();\n\n    this.provideUserModule();\n    this.provideRoleModule();\n    this.provideCoffeModule();\n    this.provideReviewModule();\n  }\n\n  private initializeSharedNamespace(): void {\n    this.provideAuthenticationModule();\n  }\n\n  private provideCommonModule(): void {\n    this.load(new CommonModule());\n  }\n\n  private provideApplicationModule(): void {\n    this.load(new ApplicationModule());\n  }\n\n  private provideAuthenticationModule(): void {\n    this.load(new AuthenticationModule());\n  }\n\n  private provideUserModule(): void {\n    this.load(new UserModule());\n  }\n\n  private provideReviewModule(): void {\n    this.load(new ReviewModule());\n  }\n\n  private provideCoffeModule(): void {\n    this.load(new CoffeeModule());\n  }\n\n  private provideRoleModule(): void {\n    this.load(new RoleModule());\n  }\n\n  private provideInversifyExpressApplication(): void {\n    this.bind<InversifyExpressServer>(\n      UI_APPLICATION_IDENTIFIERS.INVERSIFY_APPLICATION\n    ).toConstantValue(\n      new InversifyExpressServer(\n        this,\n        this.get<express.Router>(UI_APPLICATION_IDENTIFIERS.EXPRESS_ROUTER),\n        { rootPath: '/' },\n        this.get<ExpressApplication>(\n          UI_APPLICATION_IDENTIFIERS.EXPRESS_APPLICATION\n        ).getApplication(),\n        ApplicationAuthProvider\n      ).setErrorConfig(errorHandler)\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAAS,8BAA8B;AAiBhC,IAAM,eAAN,cAA2B,cAAc;AAAA,EAC9C,cAAc;AACZ,UAAM;AAAA,MACJ,cAAc;AAAA,MACd,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEO,OAAa;AAClB,SAAK,oBAAoB;AAEzB,SAAK,yBAAyB;AAC9B,SAAK,mCAAmC;AACxC,SAAK,0BAA0B;AAE/B,SAAK,kBAAkB;AACvB,SAAK,kBAAkB;AACvB,SAAK,mBAAmB;AACxB,SAAK,oBAAoB;AAAA,EAC3B;AAAA,EAEQ,4BAAkC;AACxC,SAAK,4BAA4B;AAAA,EACnC;AAAA,EAEQ,sBAA4B;AAClC,SAAK,KAAK,IAAI,aAAa,CAAC;AAAA,EAC9B;AAAA,EAEQ,2BAAiC;AACvC,SAAK,KAAK,IAAI,kBAAkB,CAAC;AAAA,EACnC;AAAA,EAEQ,8BAAoC;AAC1C,SAAK,KAAK,IAAI,qBAAqB,CAAC;AAAA,EACtC;AAAA,EAEQ,oBAA0B;AAChC,SAAK,KAAK,IAAI,WAAW,CAAC;AAAA,EAC5B;AAAA,EAEQ,sBAA4B;AAClC,SAAK,KAAK,IAAI,aAAa,CAAC;AAAA,EAC9B;AAAA,EAEQ,qBAA2B;AACjC,SAAK,KAAK,IAAI,aAAa,CAAC;AAAA,EAC9B;AAAA,EAEQ,oBAA0B;AAChC,SAAK,KAAK,IAAI,WAAW,CAAC;AAAA,EAC5B;AAAA,EAEQ,qCAA2C;AACjD,SAAK;AAAA,MACH,2BAA2B;AAAA,IAC7B,EAAE;AAAA,MACA,IAAI;AAAA,QACF;AAAA,QACA,KAAK,IAAoB,2BAA2B,cAAc;AAAA,QAClE,EAAE,UAAU,IAAI;AAAA,QAChB,KAAK;AAAA,UACH,2BAA2B;AAAA,QAC7B,EAAE,eAAe;AAAA,QACjB;AAAA,MACF,EAAE,eAAe,YAAY;AAAA,IAC/B;AAAA,EACF;AACF;AApEa;","names":[]}